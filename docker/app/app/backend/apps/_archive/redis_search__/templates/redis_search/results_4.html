<script type="text/javascript">
  console.time('Start of JQuery Drop Down Menu')

  var result  = "";
  var cate    = "";
  var url     = "";
  var table   = $('#results');


if (({{length}} == 0)){
    
    table.html('');
    for (i=0;i<10;i++)
    {
     table.data ('search'+i, 'false').data ('res'+i, '');
    }
}
else{  
  if  (table.data ('length') != "{{length}}")
{ 
table.html('');
for (i=0;i<10;i++)
{

 table.data ('search'+i, 'false').data ('res'+i, '');;
}}
    
  for (i=0;i<{{length}};i++)
  {
  
      switch(i)
	  {
	  case 0:  
	    result = "{{results.0.title}}"; 
	    cat = "	{%for cat in results.0.category %}{{cat.name}}{% endfor %}";

	    break;
	  case 1:  result = "{{results.1.title}}"; 
	           url    = "/{{results.1.url}}"; 
	           cate   = "<a href=''>{{results.1.category.0.name}}</a>"
	           break;
	  case 2:  result = "{{results.2.title}}"; break;
      case 3:  result = "{{results.3.title}}"; break;
	  case 4:  result = "{{results.4.title}}"; break;
	  case 5:  result = "{{results.5.title}}"; break;
	  case 6:  result = "{{results.6.title}}"; break;
	  case 7:  result = "{{results.7.title}}"; break;
	  case 8:  result = "{{results.8.title}}"; break;
	  case 9:  result = "{{results.9.title}}"; break;
	  }
	  

    if (table.data ('search'+i) != "true")
    {
        table.append("<tr><td>" + result + cate +"</td></tr>");
        table.data ('search'+i, 'true').data ('res'+i, result);  
    }
  }

}  
table.data ('length', {{length}});
console.timeEnd('Start of JQuery Drop Down Menu')
</script>